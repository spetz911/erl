<!DOCTYPE html>
<!-- saved from url=(0068)http://code.activestate.com/recipes/534162-an-erlang-port-in-python/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="./An Erlang Port in Python « Python recipes « ActiveState Code_files/widget62.css" media="all">
  <title>An Erlang Port in Python « Python recipes « ActiveState Code</title>
  <meta http-equiv="X-UA-Compatible" content="IE=8">
  <link rel="stylesheet" href="./An Erlang Port in Python « Python recipes « ActiveState Code_files/activestyle.css" type="text/css">
  <!--[if IE]>
    <link rel="stylesheet" href="/static/css/ie.css" type="text/css" />
  <![endif]-->
  <!--[if IE 7]>
    <link rel="stylesheet" href="/static/css/ie7.css" type="text/css" />
  <![endif]-->
  <!--[if IE 6]>
    <link rel="stylesheet" href="/static/css/ie6.css" type="text/css" />
  <![endif]-->
  <link href="./An Erlang Port in Python « Python recipes « ActiveState Code_files/prettify.css" type="text/css" rel="stylesheet">
  
  <link href="./An Erlang Port in Python « Python recipes « ActiveState Code_files/css" rel="stylesheet" type="text/css">
  <link href="./An Erlang Port in Python « Python recipes « ActiveState Code_files/css(1)" rel="stylesheet" type="text/css">
  
  
  <link rel="alternate" href="http://code.activestate.com/feeds/news/" type="application/atom+xml" title="ActiveState Code News">

  <link type="image/x-icon" href="http://code.activestate.com/static/activestyle/img/favicon.ico" rel="shortcut icon">

  <script type="text/javascript" async="" src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/ga.js"></script><script src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/jquery-1.3.2.min.js" type="text/javascript"></script>
  <script src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/jquery-ui-1.7.2.custom.min.js" type="text/javascript"></script>
  <script src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/jquery-form-2.36.js" type="text/javascript"></script>
  <script src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/searchhi.js" type="text/javascript"></script>
  

<link rel="canonical" href="./An Erlang Port in Python « Python recipes « ActiveState Code_files/An Erlang Port in Python « Python recipes « ActiveState Code.html">
<!--[if IE]><style type="text/css"> div.codeblock, pre.prettyprint { overflow: visible; overflow-x: auto; overflow-y: hidden; padding-bottom:15px; } </style><![endif]-->

  
  
  <!-- Start Google Analytics tracking code -->
  <script type="text/javascript"> var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20072-24']); _gaq.push(['_setDomainName', '.activestate.com']); _gaq.push(['_setAllowLinker', true]); _gaq.push(['_setAllowHash', false]); _gaq.push(['_trackPageview']);
  (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async =
  true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); </script>
  <!-- End Google Analytics tracking code -->
  
  
</head>
<body><div style="visibility: hidden; height: 1px; width: 1px; position: absolute; z-index: 100000; " id="_atssh"><iframe id="_atssh307" title="AddThis utility frame" style="height: 1px; width: 1px; position: absolute; z-index: 100000; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; left: 0px; top: 0px; " src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/sh47.html"></iframe></div>
<div id="as_wrapper">
 
<ul class="as_skip">
  <li><a href="http://code.activestate.com/recipes/534162-an-erlang-port-in-python/#q">Skip to Search</a></li>
  <li><a href="http://code.activestate.com/recipes/534162-an-erlang-port-in-python/#site_nav">Skip to Navigation</a></li>
  <li><a href="http://code.activestate.com/recipes/534162-an-erlang-port-in-python/#as_content">Skip to Content</a></li>
</ul>

<div id="as_header_wrapper" class="nosearchhi">
<div id="as_header">
  <div id="as_navbar" class="as_navbar_short">
    <ul id="as_sitesnav">
      <li class="as_logo"><a href="http://www.activestate.com/"><img height="18" width="90" src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/activestate.png" title="ActiveState | The Dynamic Language Experts"></a></li>
      <span class="as_navsep"></span>
      <li><a href="http://community.activestate.com/">Community</a></li>
      <span class="as_navsep">|</span>
      <li><b><a href="http://code.activestate.com/">Code</a></b></li>
      <span class="as_navsep">|</span>
      <li><a href="http://docs.activestate.com/">Docs</a></li>
      <span class="as_navsep">|</span>
      <li class="as_sitesnav_more"><a onclick="$(&#39;#as_sitesnav_downloads&#39;).slideToggle(100); return false;" href="http://www.activestate.com/downloads"><u>Downloads</u>  <small>▼</small></a>
        <ul style="display: none; " id="as_sitesnav_downloads">
          <li><a href="http://www.activestate.com/activeperl/downloads" title="Download Perl">ActivePerl</a></li>
          <li><a href="http://www.activestate.com/activepython/downloads" title="Download Python">ActivePython</a></li>
          <li><a href="http://www.activestate.com/activetcl/downloads" title="Download Tcl">ActiveTcl</a></li>
          <li><a href="http://www.activestate.com/activeperl-pro-studio/downloads" title="Download ActivePerl Pro Studio">ActivePerl Pro Studio</a></li>
          <li><a href="http://www.activestate.com/activetcl-pro-studio/downloads" title="Download ActiveTcl Pro Studio">ActiveTcl Pro Studio</a></li>
          <li><a href="http://www.activestate.com/perl-dev-kit/downloads" title="Download Perl Dev Kit">Perl Dev Kit</a></li>
          <li><a href="http://www.activestate.com/tcl-dev-kit/downloads" title="Download Tcl Dev Kit">Tcl Dev Kit</a></li>
          <li><a href="http://www.activestate.com/komodo-ide/downloads" title="Download Komodo IDE">Komodo IDE</a></li>
        </ul>
      </li>
      <span class="as_navsep">|</span>
      <li class="as_sitesnav_more"><a href="http://www.activestate.com/community" onclick="$(&#39;#as_sitesnav_more&#39;).slideToggle(100); return false;"><u>more</u> <small>▼</small></a>
        <ul id="as_sitesnav_more" style="display: none; ">
          <li><a href="http://lists.activestate.com/">Lists</a></li>
          <li><a href="http://bugs.activestate.com/">Bugs</a></li>
          <li><a href="http://code.activestate.com/ppm">PPM Index</a></li>
          <li><a href="http://code.activestate.com/pypm">PyPM Index</a></li>
        </ul>
      </li>
    </ul>
    <script type="text/javascript">
      $('body').click(function() { $('#as_sitesnav_more').hide(); $('#as_sitesnav_downloads').hide(); });
    </script>

    <div id="as_accountnav">
    
      Welcome, guest
      <span class="as_navsep">|</span> <a href="https://account.activestate.com/signin/?next=http%3A//code.activestate.com/recipes/534162-an-erlang-port-in-python/">Sign In</a>
    
      <span class="as_navsep">|</span> <a href="https://account.activestate.com/">My Account</a>
      <span class="as_navsep">|</span> <a href="https://store.activestate.com/">Store</a>
      <span class="as_navsep">|</span> <a href="https://store.activestate.com/cart" class="icon-cart">Cart</a>
    </div>
  </div>
  
  <div id="as_bannerbar">
    
<div id="site_logo" class="as_banner_text">
  <a class="as_banner_text" href="http://code.activestate.com/">ActiveState Code</a> » <a href="http://code.activestate.com/recipes/" class="as_banner_text">Recipes</a>
</div>

<div id="site_nav">
  <form id="search_form" action="http://code.activestate.com/search/recipes/">
    <input size="24" id="q" name="q" accesskey="s">
    <input type="submit" value="Search">
  </form>
</div>

    <div style="clear:both"></div>
  </div>
  
</div> <!-- end of as_header -->

<div id="as_sub_banner">
  <div id="as_sub_site_nav">
    <div id="as_sub_site_links">
      
  <a href="http://code.activestate.com/recipes/add/" title="Add a Recipe">Add a Recipe</a>
  <a href="http://code.activestate.com/recipes/langs/">Languages</a>
  <a href="http://code.activestate.com/recipes/tags/">Tags</a>
  <a href="http://code.activestate.com/recipes/users/">Authors</a>
  <a href="http://code.activestate.com/recipes/sets/">Sets</a>
  

    </div>
  </div>
</div> <!-- end of as_sub_banner -->

</div> <!-- end of as_header_wrapper -->


<div id="as_middle">
  <div id="as_content_wrapper">
    <div id="as_content">
      
      <div id="page_header">
        <h1>
An Erlang Port in Python
(Python recipe)
<span class="print_only secondary">by thanos vassilakis</span>

<div class="print_only secondary" style="margin-top: 10px;">
  ActiveState Code (http://code.activestate.com/recipes/534162/)
</div>
</h1>
      </div>
      

      <div id="content">
        
<table class="gutter_table"><tbody><tr>
<td class="gutter">





<div id="recipe_scorevote">
<form action="http://code.activestate.com/recipes/534162-an-erlang-port-in-python/up/" method="POST"><div style="display:none"><input type="hidden" name="csrfmiddlewaretoken" value="aaffb53e33f57672dc04db5a6cfdbaa3"></div>
<button class=" upvote" title="Vote up" type="submit">▲</button>
</form>
<div class="recipe_score ">2</div>
<form action="http://code.activestate.com/recipes/534162-an-erlang-port-in-python/down/" method="POST"><div style="display:none"><input type="hidden" name="csrfmiddlewaretoken" value="aaffb53e33f57672dc04db5a6cfdbaa3"></div>
<button class=" downvote" title="Vote down" type="submit">▼</button>
</form>
</div>

</td>
<td>

  <div id="description">
  <p>Erlang has  two built-in interoperability mechanisms. One is distributed Erlang nodes and the other one is ports.
Ports provide the basic Erlang mechanism for communication with the external world. They provide a byte-oriented interface to an external program. When a port has been created, Erlang can communicate with it by sending and receiving lists of bytes.  This recipe cooks an Erlang port in python. Making it easy for Erlang to instantiate and use python objects. Like most simple port implementations it uses an external python program and lets Erlang communicate via standard input and write to standard output. Theoretically, the external program could be written in any programming language. This recipe is pretty abstract and you will have to implement your own encode and decoding scheme.</p>

  </div>
  
  <div id="blocks">
  
    <div id="block-0" class="block">
    
      <div class="block-toolbar as_secondary">
        <span style="float: right;">Python, 114 lines</span>
        <div class="block-toolbar-button"><a href="http://code.activestate.com/recipes/534162-an-erlang-port-in-python/download/1/"><img src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/bullet_disk.png">Download</a></div>
        <div id="clipboard_container" class="block-toolbar-button" style="position: relative; display: inline-block; "><div id="clipboard_button" class=""><img src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/bullet_go16.png">Copy to clipboard</div><div style="position: absolute; left: 2px; top: 0px; width: 118px; height: 19px; z-index: 99; "><embed id="ZeroClipboardMovie_1" src="/static/zeroclipboard/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="118" height="19" name="ZeroClipboardMovie_1" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=1&amp;width=118&amp;height=19" wmode="transparent"></div></div>
        
      </div>
      <div class="codeblock">
      <table class="highlighttable"><tbody><tr><td class="linenos"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114</pre></td><td class="code"><div class="highlight"><pre><span class="k">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">struct</span><span class="o">,</span> <span class="nn">traceback</span>
<span class="k">from</span> <span class="nn">cStringIO</span> <span class="k">import</span> <span class="n">StringIO</span>

    
<span class="k">class</span> <span class="nc">ErlangPort</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">PACK</span> <span class="o">=</span> <span class="s">'!h'</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_in</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_out</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
        
    <span class="k">def</span> <span class="nf">recv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_in</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span> <span class="o">==</span><span class="mf">2</span><span class="p">:</span>
            <span class="p">(</span><span class="n">sz</span><span class="p">,)</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PACK</span><span class="p">,</span> <span class="n">buf</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_in</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">sz</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">what</span><span class="p">):</span>
        <span class="n">sz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">what</span><span class="p">)</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PACK</span><span class="p">,</span> <span class="n">sz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">what</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">buf</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> 
            <span class="n">buf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">ErlangPortTest</span><span class="p">(</span><span class="n">ErlangPort</span><span class="p">):</span>
    <span class="n">cmds</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="mf">2</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="mf">2</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="n">fn</span><span class="p">,</span><span class="n">arg</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s">'!BB'</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmds</span><span class="p">[</span><span class="n">fn</span><span class="p">](</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s">'!B'</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>



<span class="k">class</span> <span class="nc">ErlangPyTest</span><span class="p">(</span><span class="n">ErlangPortTest</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">SandBox</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
            <span class="k">exec</span> <span class="n">message</span>
    <span class="n">sandbox</span> <span class="o">=</span> <span class="n">SandBox</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">realout</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sandbox</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">realout</span><span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">realout</span>
        <span class="k">return</span> <span class="n">result</span>
            

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="k">import</span> <span class="nn">sys</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s">'PortTest'</span><span class="p">:</span>
            <span class="n">ErlangPortTest</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span><span class="s">'pytest'</span><span class="p">:</span>
            <span class="n">ErlangPyTest</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">"""</span>
<span class="s">Usage:</span>
<span class="s">First of all see the c Port section in the Erlang guide.</span>
<span class="s">http://www.erlang.org/doc/tutorial/c_port.html#4</span>

<span class="s">1. Start Erlang and compile the Erlang user guide example code:</span>
<span class="s">http://www.erlang.org/doc/tutorial/complex1.erl</span>


<span class="s">unix&gt; erl</span>
<span class="s">Erlang (BEAM) emulator version 4.9.1.2</span>

<span class="s">Eshell V4.9.1.2 (abort with ^G)</span>
<span class="s">1&gt; c(complex1).</span>
<span class="s">{ok,complex1}</span>
<span class="s">    </span>
<span class="s">3. Run the example.</span>
<span class="s">2&gt; complex1:start("python -u port.py PortTest").</span>
<span class="s">&lt;0.34.0&gt;</span>
<span class="s">3&gt; complex1:foo(3).</span>
<span class="s">4</span>
<span class="s">4&gt; complex1:bar(5).</span>
<span class="s">10</span>
<span class="s">5&gt; complex1:stop().</span>
<span class="s">stop</span>
<span class="s">    </span>
<span class="s">For more fun try.</span>


<span class="s">6&gt; c("c:</span><span class="se">\\</span><span class="s">tg</span><span class="se">\\</span><span class="s">python.erl").</span>
<span class="s">:/tg/python.erl:42: Warning: variable 'Reason' is unused</span>
<span class="s">{ok,python}</span>
<span class="s">7&gt; python:start("c:</span><span class="se">\\</span><span class="s">python25</span><span class="se">\\</span><span class="s">python.exe -u c:</span><span class="se">\\</span><span class="s">tg</span><span class="se">\\</span><span class="s">port.py pytest").</span>
<span class="s">&lt;0.38.0&gt;</span>
<span class="s">8&gt; python:exec("import os")</span>
<span class="s">9&gt; python:exec("self.x = os.environ['PATH']").</span>
<span class="s">* 2: syntax error before: python **</span>
<span class="s">10&gt; python:exec("import os").                  </span>
<span class="s">[]</span>
<span class="s">11&gt; python:exec("self.x = os.environ['PATH']").</span>
<span class="s">[]</span>
<span class="s">12&gt; python:exec("print self.x").</span>
<span class="s">"H:</span><span class="se">\\</span><span class="s">PROGRA~1</span><span class="se">\\</span><span class="s">ERL55~1.5</span><span class="se">\\</span><span class="s">ERTS-5~1.5</span><span class="se">\\</span><span class="s">bin;H:</span><span class="se">\\</span><span class="s">PROGRA~1</span><span class="se">\\</span><span class="s">ERL55~1.5</span><span class="se">\\</span><span class="s">bin</span>
<span class="s">m Files</span><span class="se">\\</span><span class="s">ActivePositionManager</span><span class="se">\\</span><span class="s">;C:</span><span class="se">\\</span><span class="s">WINNT</span><span class="se">\\</span><span class="s">system32;C:</span><span class="se">\\</span><span class="s">WINNT;C:</span><span class="se">\\</span><span class="s">WI</span>
<span class="s">32</span><span class="se">\\</span><span class="s">Wbem;"</span>
<span class="s">"""</span>
</pre></div>
</td></tr></tbody></table>
      </div>
    
    </div>
  
    <div id="block-1" class="block">
    
      <div class="proseblock">
      <p>First of all see the c Port section in the Erlang guide.
<a href="http://www.erlang.org/doc/tutorial/c_port.html#4" rel="nofollow">http://www.erlang.org/doc/tutorial/c_port.html#4</a>.
Erlang is a great language for distributed programming especially if you use the OPT frame work, but python is nicer to program in. This class is my first of many Erlang/Python utility classes that will let me program in Python distributed nodes and yet manage them with Erlang code.</p>

<p>ErlangPort is  the main base class in this recipe. For most cases all you will have to do is override process to return a string or a struct representation in network safe mode. Also remember to run python with the -u (unbuffered) flag set.</p>

<p>ErlangPortTest is just a pythonesque port of the c example given in the Erlang guide. You can find the  Erlang example at <a href="http://www.erlang.org/doc/tutorial/complex1.erl" rel="nofollow">http://www.erlang.org/doc/tutorial/complex1.erl</a></p>

<p>ErlangPyTest lets Erlang execute python code block by block. In this class I use a letter envelop idiom (Sandbox) to save Erlang form clobbering the port object. Be careful how you use it!</p>

<p>For This use python.erl</p>

<pre class="prettyprint"><code><span class="pun">-</span><span class="kwd">module</span><span class="pun">(</span><span class="pln">python</span><span class="pun">).</span><span class="pln"><br></span><span class="pun">-</span><span class="kwd">export</span><span class="pun">([</span><span class="pln">start</span><span class="pun">/</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> stop</span><span class="pun">/</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> init</span><span class="pun">/</span><span class="lit">1</span><span class="pun">]).</span><span class="pln"><br></span><span class="pun">-</span><span class="kwd">export</span><span class="pun">([</span><span class="kwd">exec</span><span class="pun">/</span><span class="lit">1</span><span class="pun">]).</span><span class="pln"><br><br>start</span><span class="pun">(</span><span class="typ">ExtPrg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"><br>&nbsp; &nbsp; spawn</span><span class="pun">(?</span><span class="pln">MODULE</span><span class="pun">,</span><span class="pln"> init</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="typ">ExtPrg</span><span class="pun">]).</span><span class="pln"><br>stop</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"><br>&nbsp; &nbsp; python </span><span class="pun">!</span><span class="pln"> stop</span><span class="pun">.</span><span class="pln"><br><br></span><span class="kwd">exec</span><span class="pun">(</span><span class="pln">X</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"><br>&nbsp; &nbsp; call_port</span><span class="pun">(</span><span class="pln">X</span><span class="pun">).</span><span class="pln"><br><br><br>call_port</span><span class="pun">(</span><span class="typ">Msg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"><br>&nbsp; &nbsp; python </span><span class="pun">!</span><span class="pln"> </span><span class="pun">{</span><span class="pln">call</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">(),</span><span class="pln"> </span><span class="typ">Msg</span><span class="pun">},</span><span class="pln"><br>&nbsp; &nbsp; receive<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">{</span><span class="pln">python</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Result</span><span class="pun">}</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Result</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">end</span><span class="pun">.</span><span class="pln"><br><br>init</span><span class="pun">(</span><span class="typ">ExtPrg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">register</span><span class="pun">(</span><span class="pln">python</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">()),</span><span class="pln"><br>&nbsp; &nbsp; process_flag</span><span class="pun">(</span><span class="pln">trap_exit</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">Port</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> open_port</span><span class="pun">({</span><span class="pln">spawn</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ExtPrg</span><span class="pun">},</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">packet</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">}]),</span><span class="pln"><br>&nbsp; &nbsp; loop</span><span class="pun">(</span><span class="typ">Port</span><span class="pun">).</span><span class="pln"><br><br>loop</span><span class="pun">(</span><span class="typ">Port</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"><br>&nbsp; &nbsp; receive<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">{</span><span class="pln">call</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Caller</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Msg</span><span class="pun">}</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Port</span><span class="pln"> </span><span class="pun">!</span><span class="pln"> </span><span class="pun">{</span><span class="kwd">self</span><span class="pun">(),</span><span class="pln"> </span><span class="pun">{</span><span class="pln">command</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Msg</span><span class="pun">}},</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; receive<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">{</span><span class="typ">Port</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln">data</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Data</span><span class="pun">}}</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Caller</span><span class="pln"> </span><span class="pun">!</span><span class="pln"> </span><span class="pun">{</span><span class="pln">python</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Data</span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">end</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; loop</span><span class="pun">(</span><span class="typ">Port</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; stop </span><span class="pun">-&gt;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Port</span><span class="pln"> </span><span class="pun">!</span><span class="pln"> </span><span class="pun">{</span><span class="kwd">self</span><span class="pun">(),</span><span class="pln"> close</span><span class="pun">},</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; receive<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">{</span><span class="typ">Port</span><span class="pun">,</span><span class="pln"> closed</span><span class="pun">}</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">exit</span><span class="pun">(</span><span class="pln">normal</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">end</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">{</span><span class="str">'EXIT'</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Port</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Reason</span><span class="pun">}</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">exit</span><span class="pun">(</span><span class="pln">port_terminated</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">end</span><span class="pun">.</span><span class="pln"><br></span></code></pre>

      </div>
    
    </div>
  
  </div>
  <div id="recipe_tools">
    <!-- AddThis Button BEGIN -->
    <script type="text/javascript">var addthis_config = {services_compact: 'delicious,digg,reddit,twitter,email,favorites,more', username: 'xa-4b4f86a749591ece', data_use_flash: false};</script>
    <a class="addthis_button"><img width="125" height="16" border="0" alt="Share" src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/lg-share-ru.gif"></a>
    <script type="text/javascript" src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/addthis_widget.js"></script>
    <!-- AddThis Button END -->
    <a href="http://code.activestate.com/help/feedback/?type=flag&subject=Flag%20recipe%20534162&text=Please%20indicate%20**why**%20you%20want%20to%20flag%20that%20recipe."><img src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/flag.png"></a>
  </div>
  
  
  <div class="print_only">
    Tags: <a href="http://code.activestate.com/recipes/tags/distributed/">distributed</a>, <a href="http://code.activestate.com/recipes/tags/erlang/">erlang</a>, <a href="http://code.activestate.com/recipes/tags/integration/">integration</a>, <a href="http://code.activestate.com/recipes/tags/process/">process</a>
  </div>
  

</td></tr></tbody></table> <!-- end of gutter_table -->





<div id="addcomment">
  <h4 class="section_header">Add a comment</h4>
  <div class="section">
    <div class="comment_gutter">
      
    </div>
    <div class="comment_content">
      
        <p id="signin_to_comment"><a href="https://account.activestate.com/signin/?next=http%3A//code.activestate.com/recipes/534162-an-erlang-port-in-python/">Sign in</a> to comment</p>
      
    </div>
  </div>
</div>

      </div> <!-- end of content -->
    </div> <!-- end of as_content -->
  </div> <!-- end of as_content_wrapper -->
  
  <div id="as_sidebar_wrapper">
    <div id="as_sidebar">
    

<div id="as_sidebar_dynamic">




<table class="gravatar">
<tbody><tr><td style="width: 40px;">
<img src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/avatar.php" height="30" width="30">
</td><td>
Created by <a href="http://code.activestate.com/recipes/users/4048784/">thanos vassilakis</a>
on <span class="nowrap">Wed, 14 Nov 2007</span>
(<a href="http://code.activestate.com/recipes/tags/meta:license=psf/" title="Licensed under the PSF License">PSF</a>)
</td></tr>
</tbody></table>

<table class="prevnext">

<tbody><tr class="prevnext-lang-python">
<td><a class="prevnext_arrow" href="http://code.activestate.com/recipes/534161-automation-of-unix-shell-or-dos-shell-programs/?in=lang-python" title="Previous element in Python recipes">◄</a></td>
<td class="prevnext_label"><a href="http://code.activestate.com/recipes/langs/python">Python recipes (3407)</a></td>
<td><a class="prevnext_arrow" href="http://code.activestate.com/recipes/534166-redirectedio-context-manager-and-redirect_io-decor/?in=lang-python" title="Next element in Python recipes">►</a></td>
</tr>

<tr class="prevnext-user-4048784">
<td>◄</td>
<td class="prevnext_label"><a href="http://code.activestate.com/recipes/users/4048784">thanos vassilakis's recipes (1)</a></td>
<td>►</td>
</tr>

</tbody></table>





<div id="tags">
<h3>Tags</h3>
<ul class="nomachinetags flat"><li class="tag" id="tag-li-11"><a href="http://code.activestate.com/recipes/tags/distributed/" class="tag">distributed</a></li><li class="tag" id="tag-li-2509"><a href="http://code.activestate.com/recipes/tags/erlang/" class="tag">erlang</a></li><li class="tag" id="tag-li-1067"><a href="http://code.activestate.com/recipes/tags/integration/" class="tag">integration</a></li><li class="tag" id="tag-li-83"><a href="http://code.activestate.com/recipes/tags/process/" class="tag">process</a></li></ul><a class="machine_tag_toggle"><span>▶ Show</span> machine tags (9)</a> <a class="machine_tag_help" href="http://code.activestate.com/help/tags/" title="help about tags and machine tags"><img src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/help.png"></a><ul class="machinetags flat" style="display: none; "><li class="tag" id="tag-li-2085"><a href="http://code.activestate.com/recipes/tags/meta:language=python/" class="tag">meta:language=python</a></li><li class="tag" id="tag-li-2116"><a href="http://code.activestate.com/recipes/tags/meta:license=psf/" class="tag">meta:license=psf</a></li><li class="tag" id="tag-li-2175"><a href="http://code.activestate.com/recipes/tags/meta:loc=114/" class="tag">meta:loc=114</a></li><li class="tag" id="tag-li-1405"><a href="http://code.activestate.com/recipes/tags/meta:requires=sys/" class="tag">meta:requires=sys</a></li><li class="tag" id="tag-li-1450"><a href="http://code.activestate.com/recipes/tags/meta:requires=cstringio/" class="tag">meta:requires=cstringio</a></li><li class="tag" id="tag-li-1406"><a href="http://code.activestate.com/recipes/tags/meta:requires=traceback/" class="tag">meta:requires=traceback</a></li><li class="tag" id="tag-li-1494"><a href="http://code.activestate.com/recipes/tags/meta:requires=struct/" class="tag">meta:requires=struct</a></li><li class="tag" id="tag-li-1407"><a href="http://code.activestate.com/recipes/tags/meta:requires=os/" class="tag">meta:requires=os</a></li><li class="tag" id="tag-li-1379"><a href="http://code.activestate.com/recipes/tags/meta:score=2/" class="tag">meta:score=2</a></li></ul>



</div>

<div id="requires">
  <h3>Required Modules</h3>
  <ul class="flat">
  
  <li><a href="http://code.activestate.com/recipes/langs/python/tags/meta:requires=sys/">sys</a>
  
  
  
  
  </li>
  
  <li><a href="http://code.activestate.com/recipes/langs/python/tags/meta:requires=os/">os</a>
  
  
  
  
  </li>
  
  <li><a href="http://code.activestate.com/recipes/langs/python/tags/meta:requires=struct/">struct</a>
  
  
  
  
  </li>
  
  <li><a href="http://code.activestate.com/recipes/langs/python/tags/meta:requires=traceback/">traceback</a>
  
  
  
  
  </li>
  
  <li><a href="http://code.activestate.com/recipes/langs/python/tags/meta:requires=cstringio/">cstringio</a>
  
  
  
  
  </li>
  
  </ul>


</div>


<div id="otherinfo">
<h3>Other Information and Tasks</h3>
<ul class="action_list">
  
  <li><a href="http://code.activestate.com/recipes/add/?fork=534162">Fork this recipe</a></li>
  <li>Licensed under the <a href="http://code.activestate.com/recipes/tags/meta:license=psf/">PSF License</a></li>
  <li>Viewed 16107 times</li>
  
  
  
  <li><a href="http://code.activestate.com/recipes/534162-an-erlang-port-in-python/history/3/" title="Recipe history">Revision 3</a>
  
  <span class="secondary">(updated 1 year ago)</span>
  </li>
  
</ul>
</div>

</div>


<div style="margin: 30px 15px;">

<script type="text/javascript"><!--//<![CDATA[
  var m3_u = (location.protocol=='https:'?'https://ads.activestate.com/www/delivery/ajs.php':'http://ads.activestate.com/www/delivery/ajs.php');
  var m3_r = Math.floor(Math.random()*99999999999);
  if (!document.MAX_used) document.MAX_used = ',';
  document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
  document.write ("?zoneid=1");
  document.write ('&amp;cb=' + m3_r);
  if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
  document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
  document.write ("&amp;loc=" + escape(window.location));
  if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
  if (document.context) document.write ("&context=" + escape(document.context));
  if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
  document.write ("'><\/scr"+"ipt>");
//]]>--></script><script type="text/javascript" src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/ajs.php"></script><a href="http://img.activestate.com/www/delivery/ck.php?oaparams=2__bannerid=38__zoneid=1__cb=332dd5768d__oadest=http%3A%2F%2Fwww.activestate.com%2Fbusiness-edition%3Futm_source%3Dascommunity%26utm_medium%3Dbanner%26utm_term%3Dna%26utm_content%3Dsky%26utm_campaign%3Dapr2010busedgen" target="_blank"><img src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/9094bf9d78f45b83c6c2712f64f2a12d.png" width="195" height="600" alt="Perl, Python and Tcl support for AIX, Solaris and HP-UX" title="Perl, Python and Tcl support for AIX, Solaris and HP-UX" border="0"></a><div id="beacon_332dd5768d" style="position: absolute; left: 0px; top: 0px; visibility: hidden;"><img src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/lg.php" width="0" height="0" alt="" style="width: 0px; height: 0px;"></div>
<noscript>&lt;a href='http://ads.activestate.com/www/delivery/ck.php?n=aa9dea02&amp;amp;cb=INSERT_RANDOM_NUMBER_HERE' target='_blank'&gt;&lt;img src='http://ads.activestate.com/www/delivery/avw.php?zoneid=1&amp;amp;cb=INSERT_RANDOM_NUMBER_HERE&amp;amp;n=aa9dea02' border='0' alt='' /&gt;&lt;/a&gt;</noscript>
</div>


    </div> <!-- end of sidebar -->
  </div> <!-- end of as_sidebar_wrapper -->

  <div class="as_clear">&nbsp;</div>
</div> <!-- end of as_middle -->


<div id="as_footer_wrapper" class="as_footer2 nosearchhi">
<div id="as_footer">
<div class="as_footer2_section">
  <h4 class="as_footer2_header">Accounts</h4>
  <ul>
    
    <li><a href="https://account.activestate.com/signup/?activationnext=http%3A//code.activestate.com/recipes/534162-an-erlang-port-in-python/">Create Account (Free!)</a></li>
    <li><a href="https://account.activestate.com/signin/?next=http%3A//code.activestate.com/recipes/534162-an-erlang-port-in-python/">Sign In</a></li>
    
    
  </ul>
</div>
<div class="as_footer2_section">
  <h4 class="as_footer2_header">Code Recipes</h4>
  <ul>
    
<li><a href="http://code.activestate.com/recipes/add/">Add a recipe</a></li>
<li><a href="http://code.activestate.com/recipes/">Recipes</a></li>
<li><a href="http://code.activestate.com/recipes/langs/">Languages</a></li>
<li><a href="http://code.activestate.com/recipes/tags/">Tags</a></li>
<li><a href="http://code.activestate.com/recipes/users/">Authors</a></li>
<li><a href="http://code.activestate.com/recipes/sets/">Sets</a></li>

  </ul>
</div>
<div class="as_footer2_section">
  <h4 class="as_footer2_header">Feedback &amp; Information</h4>
  <ul>
    <li><a href="http://code.activestate.com/help/feedback/?type=general">Give Site Feedback</a></li>
    <li><a href="http://code.activestate.com/help/feedback/?type=bug&subject=Problem%20on%20page%20'/recipes/534162-an-erlang-port-in-python/'">Report a Site Problem</a></li>
    <li style="margin-top: 10px;"><a href="http://code.activestate.com/about/">About</a></li>
    <li><a href="http://code.activestate.com/help/faq/">FAQ</a></li>
    <li><a href="http://code.activestate.com/help/terms/">Terms of Service</a></li>
  </ul>
</div>
<div class="as_footer2_section">
  <h4 class="as_footer2_header">ActiveState</h4>
  <ul>
    <li class="as_footer2_feed"><a href="http://www.activestate.com/blog">ActiveState Blog</a></li>
    <li><a title="Perl Solutions" href="http://www.activestate.com/perl">Perl Solutions</a></li>
    <li><a title="Python Solutions" href="http://www.activestate.com/python">Python Solutions</a></li>
    <li><a title="Tcl Solutions" href="http://www.activestate.com/tcl">Tcl Solutions</a></li>
    <li><a title="Download Perl" href="http://www.activestate.com/activeperl/downloads">Download ActivePerl</a></li>
    <li><a title="Download Python" href="http://www.activestate.com/activepython/downloads">Download ActivePython</a></li>
    <li><a title="Download Tcl" href="http://www.activestate.com/activetcl/downloads">Download ActiveTcl</a></li>
    <li style="margin-top: 10px"><a href="http://www.activestate.com/company">About ActiveState</a></li>
    <li><a href="http://www.activestate.com/company/careers">Careers</a></li>
  </ul>
</div>
<div class="as_footer2_copyright">
  <span style="margin-left: 10px;">© 2011 ActiveState Software. All rights reserved.</span>
  <a style="margin-left: 20px;" href="http://www.activestate.com/privacy-policy">Privacy Policy</a>
  | <a href="http://www.activestate.com/company/contact-us">Contact Us</a>
  | <a href="http://www.activestate.com/support">Support</a>
</div>
</div> <!-- end of as_footer -->
</div> <!-- end of as_footer_wrapper -->

<div id="as_messagebar" style="display: none;">
  <span style="float: right;">
    <b onclick="$(&#39;#as_messagebar&#39;).slideUp(150);" style="cursor: pointer;">&nbsp;x&nbsp;</b>
  </span>
  <span class="message">&nbsp;</span>
  <span class="message-undo" style="display: none;">
    <form method="POST" action=""><button type="submit"><div style="display:none"><input type="hidden" name="csrfmiddlewaretoken" value="aaffb53e33f57672dc04db5a6cfdbaa3"></div><u>Undo</u></button></form>
  </span>
</div>

</div> <!-- end of as_wrapper -->


<script src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/prettify.js"></script> 
<script type="text/javascript"> 
 $(function() {
    prettyPrint();
 });
</script> 








<script src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/flash_detect_min.js" type="text/javascript"></script>
<script src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/ZeroClipboard.js" type="text/javascript"></script>
<script src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/recipes.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {
    Recipes.hijax_sidebar();
    Recipes.hijax_voting();
    // hide machine tags by default
    Recipes.toggle_machine_tags(false);
    Recipes.highlight_last_comment();
    // setup copy button
    Recipes.setup_copy_button("## {{{ http://code.activestate.com/recipes/534162/ (r3)\u000A", "## end of http://code.activestate.com/recipes/534162/ }}}\u000A");
    // Pre-load wait animation used for voting buttons.
    $('<img src="/static/img/ajax-loader.gif"/>');
});
var in_param = "";
</script>






    <!-- python tracking -->
    <script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 1071420929;
    var google_conversion_language = "en";
    var google_conversion_format = "3";
    var google_conversion_color = "666666";
    var google_conversion_label = "qWX3CIvQhAIQgazy_gM";
    var google_conversion_value = 0;
    /* ]]> */
    </script>
    <script type="text/javascript" src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/conversion.js">
    </script><img height="1" width="1" border="0" src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/saved_resource">
    <noscript>
    &lt;div style="display:inline;"&gt;
    &lt;img height="1" width="1" style="border-style:none;" alt="" src="https://www.googleadservices.com/pagead/conversion/1071420929/?label=qWX3CIvQhAIQgazy_gM&amp;amp;guid=ON&amp;amp;script=0"/&gt;
    &lt;/div&gt;
    </noscript>






<!-- Stackato demo app tracking pixel -->
<img src="./An Erlang Port in Python « Python recipes « ActiveState Code_files/tracking_pixel.gif">


</body><div id="gdx-bubble-container"><div id="gdx-bubble-main" style="left: 143.5px !important; top: 1335px !important; "><div id="gdx-bubble-close" style="background-image: url(chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/static/close.png) !important; "></div><div id="gdx-bubble-query-container" style="display: none !important; "><div id="gdx-bubble-query">representation</div><div id="gdx-bubble-audio-icon" style="background-image: url(chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/static/audio.png) !important; display: none !important; "></div><div id="gdx-bubble-query-container-end"></div></div><div id="gdx-bubble-meaning">No definition found.</div><div id="gdx-bubble-options-tip" style="display: none !important; ">Tip: Didn't want this definition pop-up? Try setting a trigger key in <a href="chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/options.html" target="_blank">Extension Options</a>.</div><div id="gdx-bubble-attribution" style="display: none !important; "><a target="_blank" style="display: none !important; "></a><div style="display: inline !important; ">Translated from English</div></div><div id="gdx-bubble-more" style="display: block !important; "><a target="_blank" href="http://www.google.com/search?q=http%3A%2F%2Fwww.erlang.org%2Fdoc%2Ftutorial%2Fcomplex1.erl">Search the web for "http://www.erlang.org/doc/tutorial/complex1.erl" »</a></div></div><div id="gdx-arrow-container"><div class="gdx-arrow-main" style="top: 1398px !important; left: 266.5px !important; "><div class="gdx-bubble-arrow-inner" id="gdx-bubble-arrow-inner-down"></div><div class="gdx-bubble-arrow-outer" id="gdx-bubble-arrow-outer-down"></div></div></div></div></html>